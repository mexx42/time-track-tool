<tal:block metal:use-macro="templates/page/macros/icing">
<title metal:fill-slot="head_title">Abfrage Rechnung</title>
<span metal:fill-slot="body_title" tal:omit-tag="python:1"
      tal:content="string:Abfrage ${Classname}"></span>

<tal:block metal:fill-slot="content">
 <tal:block tal:define=
  "batch request/batch;
   pdict python: utils.properties_dict (db, context);
   ep    python: utils.ExtProperty;
   props python:
    ( ep (utils, pdict ['id'])
    , ep (utils, pdict ['invoice_no'])
    , ep (utils, pdict ['period_start'])
    , ep (utils, pdict ['period_end'])
    , ep (utils, pdict ['amount'])
    , ep (utils, pdict ['currency'], multiselect = 1)
    , ep (utils, pdict ['balance_open'])
    , ep (utils, pdict ['payment'])
    , ep (utils, pdict ['open'])
    , ep (utils, pdict ['n_sent'])
    , ep (utils, pdict ['send_it'], editable = 1)
    , ep (utils, pdict ['last_sent'])
    , ep (utils, pdict ['date_payed'])
    , ep (utils, pdict ['bookentry'])
    , ep (utils, pdict ['receipt_no'])
    , ep (utils, pdict ['payer'],      lnkattr = 'lastname')
    , ep (utils, pdict ['subscriber'], lnkattr = 'lastname')
    , ep (utils, pdict ['abo'])
    );
  "
  tal:condition="context/is_view_ok">

  <form method="POST" tal:attributes="action request/classname">
  <tal:block metal:use-macro="templates/page/macros/search_display"></tal:block>
  <p>
  <input type="submit" value=" Speichern ">
  <input type="hidden" name="@action" value="edit">
  <tal:block replace="structure request/indexargs_form" />
  </p>
  </form>

  <tal:block metal:use-macro="templates/page/macros/search_form">
   <tal:block metal:fill-slot="query_title">
    <tal:block tal:replace="python:'Abfrage ' + Classname">
    </tal:block>
   </tal:block>
  </tal:block>
 </tal:block>
</tal:block>
</tal:block>
