<tal:block metal:use-macro="templates/page/macros/icing">
<title metal:fill-slot="head_title"
       tal:content="python:i18n.gettext (context._classname)"></title>
<span metal:fill-slot="body_title" tal:omit-tag="python:1"
      tal:content="python:i18n.gettext (context._classname)"></span>
<tal:block metal:fill-slot="create_or_query">
 <tal:block 
  metal:use-macro="templates/page/macros/create_or_query_new_tracker_item" />
</tal:block>

<td class="content" metal:fill-slot="content">
<b tal:condition="python:0" tal:content="context/designator"></b>

<tal:block
 tal:define=
  " excpt     python:
              ( 'creator', 'creation'
              , 'actor',   'activity'
              , 'content', 'messages', 'files'
              )
  ; labelprop python: klass._klass.labelprop ()
  ; linkprops python: (labelprop, 'id')
  ; props     python:[i for i in utils.sorted_properties (db, context)
                      if i._name not in excpt
                     ]
  ; items     python:klass.list()
  ; n         python:len (props) + 1
  ">
<table class="otherinfo"
 tal:condition="items"
>
 <tr>
  <tal:block tal:repeat="prop props">
   <th tal:content="structure python:utils.fieldname (classname, prop._name)"/>
  </tal:block>
 </tr>
 <tr tal:repeat="item items">
  <tal:block tal:repeat="prop props">
   <tal:block tal:condition="python:prop._name in linkprops">
    <td tal:condition="python:request.user.hasPermission('Edit', classname)">
     <a tal:attributes="href string:${classname}${item/id}"
        tal:content="python:item [prop._name]">keyword here</a>
    </td>
    <td tal:condition="python:not(request.user.hasPermission('Edit', classname))">
     <b tal:content="python:item [prop._name]">keyword here</b>
    </td>
   </tal:block>
   <tal:block tal:condition="python:prop._name not in linkprops">
    <td tal:content="structure python:utils.ExtProperty
        (utils, prop, item = item).as_listentry ()"/>
   </tal:block>
  </tal:block>
 </tr>
 <tr tal:condition="python:request.user.hasPermission('Edit', classname)">
  <td tal:attributes="colspan n" style="border-top: 1px solid gray">
   <p i18n:translate="">
      To edit <span tal:replace="Classname" i18n:name="Classname" />
      click on the field under
      &quot;<span tal:replace="python:i18n.gettext (labelprop)"
            i18n:name="labelprop" />&quot;.
   </p>
   <a tal:attributes="href python:request.indexargs_url
      (classname, {'@action':'export_csv_names'})" i18n:translate="">
      Download as CSV
   </a>
  </td>
 </tr>
</table>
<p></p>

<form method="POST" onSubmit="return submit_once()"
      enctype="multipart/form-data" tal:condition="context/is_view_ok"
      tal:attributes="action context/designator"
      name="itemSynopsis">

<input type="hidden" name="@template" value="item">

<table class="form">

 <tal:block tal:repeat="prop props">
  <tr tal:condition="python:prop._name not in ('id','date','author')">
   <th tal:content="structure python:utils.fieldname (classname, prop._name)"/>
   <td tal:content="structure python:utils.ExtProperty
       (utils, prop, item = context).menu_or_field (db)"/>
  </tr>
 </tal:block>
 <tr metal:use-macro="templates/page/macros/message_box" />
 <tr tal:condition="has_files">
   <th tal:content="structure python:utils.fieldname (classname, 'files')" />
   <td colspan="3">
    <tal:block metal:use-macro="templates/page/macros/ttt_issue_files"/>
   </td>
 </tr>

 <tr>
  <td>&nbsp;
  </td>
  <td colspan=3>
   <span tal:content="structure context/submit" tal:condition="context/is_edit_ok" />
   <input type="button"
     tal:condition="python:context.id and context.is_view_ok()"
     tal:attributes=
      "onClick string:javascript:help_window('${context/designator}?@template=history','600','300')"
     value="History" i18n:attributes="value">
  </td>
 </tr>
</table>

</form>

 <table metal:use-macro="templates/page/macros/note_required" />
 <table metal:use-macro="templates/page/macros/message_display" />


</tal:block>
</td>

</tal:block>
