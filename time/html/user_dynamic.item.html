<tal:block metal:use-macro="templates/page/macros/icing">
 <title metal:fill-slot="head_title">
  <tal:block tal:condition="context/id" i18n:translate="">
   <span tal:replace="string:${Classname}: ${context/id}"
    i18n:name="classname_id"/>
   created by
   <span tal:replace="context/creator" i18n:name="creator"/>
  </tal:block>
  <tal:block tal:condition="not:context/id" i18n:translate="">New
   <span tal:replace="Classname" i18n:name="Classname" />
  </tal:block>
 </title>
  <tal:block metal:fill-slot="create_or_query">
    <tal:block 
     metal:use-macro="templates/page/macros/create_or_query_new_tracker_item" />
  </tal:block> 

 <span metal:fill-slot="body_title" tal:omit-tag="python:1"
       tal:content="Classname"></span>

 <tal:block metal:fill-slot="content">
  <tal:block tal:define=
    " use_labelprop       python:0
    ; required_attributes string:user
    ">
   <tal:block metal:use-macro="templates/page/macros/ttt_issue">
    <tal:block metal:fill-slot="ttt_issue_content">
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'user')"/>
      <td tal:condition="not:context/id">
       <tal:block tal:define=
            "name      python:'user';
             form      string:itemSynopsis;
             dont_care string:- no selection -;
             selected  context/user/id | string:0;
            ">
        <tal:block metal:use-macro="templates/userlist/macros/user"></tal:block>
       </tal:block>
      </td>
      <td tal:condition="context/id"
        tal:content="structure python:utils.ExtProperty
         ( utils, context.user.username, item = context.user).formatlink
           (add_hidden = True)"/>
      <th/>
      <td tal:condition="python:context.id and not context.valid_to">
       <a i18n:translate="" tal:attributes="href python:
       'user_dynamic?:template=item&' + '&'.join
       ([ '%s=%s' % (i, context [i]) for i in
         [ 'user'
         , 'booking_allowed'
         , 'durations_allowed'
         , 'daily_worktime'
         , 'weekend_allowed'
         , 'travel_full'
         , 'vacation_yearly'
         , 'weekly_hours'
         , 'supp_weekly_hours'
         , 'hours_mon'
         , 'hours_tue'
         , 'hours_wed'
         , 'hours_thu'
         , 'hours_fri'
         , 'hours_sat'
         , 'hours_sun'
         , 'org_location'
         , 'department'
         ]
        ]
       )">
          new user_dynamic record
       </a>
      </td>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'valid_from')"/>
      <td>
       <span tal:content="structure python:context.valid_from.field ()"/>
       <span tal:replace="structure python:utils.date_help
             (request, context.valid_from)"/>
      </td>
      <th tal:content="structure python:utils.fieldname
          (classname, 'valid_to')"/>
      <td>
       <span tal:replace="structure python:context.valid_to.field ()"/>
       <span tal:replace="structure python:utils.date_help
             (request, context.valid_to)"/>
      </td>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'booking_allowed')"/>
      <td tal:content="structure python:context.booking_allowed.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'travel_full')"/>
      <td tal:content="structure python:context.travel_full.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'durations_allowed')"/>
      <td tal:content="structure python:context.durations_allowed.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'weekend_allowed')"/>
      <td tal:content="structure python:context.weekend_allowed.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'vacation_remaining')"/>
      <td tal:content="structure python:context.vacation_remaining.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'vacation_yearly')"/>
      <td tal:content="structure python:context.vacation_yearly.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'daily_worktime')"/>
      <td tal:content="structure python:context.daily_worktime.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'weekly_hours')"/>
      <td tal:content="structure python:context.weekly_hours.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'supp_weekly_hours')"/>
      <td tal:content="structure python:context.supp_weekly_hours.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'daily_hours')"/>
      <td colspan=3>
       <span tal:repeat="i python:
              [ context.hours_mon
              , context.hours_tue
              , context.hours_wed
              , context.hours_thu
              , context.hours_fri
              , context.hours_sat
              , context.hours_sun
              ]"
        tal:content="structure python:utils.ExtProperty
         ( utils, i
         , item       = context
         , editable   = 1
         , fieldwidth = 3
         ).colonfield ()"/>
      </td>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'org_location')"/>
      <td tal:content="structure python:context.org_location.menu ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'department')"/>
      <td tal:content="structure python:context.department.menu ()"/>
     </tr>
    </tal:block>
   </tal:block>
  </tal:block>
 </tal:block>

</tal:block>
