<tal:block metal:use-macro="templates/page/macros/icing">
<tal:block metal:fill-slot="create_or_query">
 <tal:block 
  metal:use-macro="templates/page/macros/create_or_query_new_tracker_item" />
</tal:block>

<tal:block metal:fill-slot="content">
 <tal:block tal:define=
  "batch request/batch;
   pdict python: utils.properties_dict (db, context);
   prp python:
    ( ('id',               {})
    , ('ext_id',           {})
    , ('ext_status',       {})
    , ('ext_tracker',      dict (multiselect = 1))
    , ('issue', dict
        ( searchname   = 'issue.id'
        , searchable   = True
        , sortable     = True
        , do_classhelp = False
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.category'
        , searchable   = True
        , sortable     = True
        , multiselect  = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.title'
        , searchable   = True
        , sortable     = True
        , do_classhelp = False
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.area'
        , searchable   = True
        , sortable     = True
        , multiselect  = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.kind'
        , searchable   = True
        , sortable     = True
        , multiselect  = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.status'
        , searchable   = True
        , sortable     = True
        , multiselect  = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.severity'
        , searchable   = True
        , sortable     = True
        , multiselect  = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.responsible'
        , searchable   = True
        , sortable     = True
        , help_props   = ['firstname', 'lastname']
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.deadline'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.earliest_start'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.numeric_effort'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.priority'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.effective_prio'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.release'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.part_of'
        , searchable   = True
        , do_classhelp = False
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.part_of.id'
        , do_classhelp = False
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.fixed_in'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.nosy'
        , searchable   = False
        , sortable     = False
        , do_classhelp = False
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.creator'
        , searchable   = True
        , sortable     = True
        , help_props   = ['firstname', 'lastname']
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.actor'
        , searchable   = True
        , sortable     = True
        , help_props   = ['firstname', 'lastname']
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.planned_begin'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.planned_end'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.cur_est_begin'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.cur_est_end'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.creation'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.activity'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.closed'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.keywords'
        , searchable   = False
        , sortable     = False
        , do_classhelp = False
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.maturity_index'
        , searchable   = True
        , sortable     = True
        )
      )
    , ('issue', dict
        ( searchname   = 'issue.doc_issue_status'
        , searchable   = True
        , sortable     = True
        , multiselect  = True
        )
      )
    );
   props python:
    [ utils.ExtProperty (utils, pdict [p [0]], ** p [1])
      for p in prp if p [0] in pdict
    ];
   "
  tal:condition="context/is_view_ok">

  <tal:block metal:use-macro="templates/page/macros/search_results"/>
  <tal:block metal:use-macro="templates/page/macros/simple_search_form"/>
 </tal:block>
</tal:block>
</tal:block>
