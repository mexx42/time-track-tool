<tal:block metal:use-macro="templates/page/macros/icing">
<tal:block metal:fill-slot="create_or_query">
 <tal:block 
  metal:use-macro="templates/page/macros/create_or_query_new_tracker_item" />
</tal:block>

<tal:block metal:fill-slot="content">
 <tal:block tal:define=
  "batch request/batch;
   pdict python: utils.properties_dict (db, context);
   props python:
    ( utils.ExtProperty (utils, pdict ['id'])
    , utils.ExtProperty (utils, pdict ['confidential'])
    , utils.ExtProperty (utils, pdict ['category'],       multiselect = 1)
    , utils.ExtProperty
        ( utils
        , pdict ['classification']
        , multiselect = 1
        , filter      = {'valid' : True}
        )
    , utils.ExtProperty (utils, pdict ['execution'],      multiselect = 1)
    , utils.ExtProperty (utils, pdict ['title'])
    , utils.ExtProperty (utils, pdict ['status'],         multiselect = 1)
    , utils.ExtProperty (utils, pdict ['type'],           multiselect = 1)
    , utils.ExtProperty
        ( utils, pdict ['responsible']
        , help_props   = ['firstname', 'lastname']
        )
    , utils.ExtProperty (utils, pdict ['numeric_effort'])
    , utils.ExtProperty (utils, pdict ['prio'])
    , utils.ExtProperty (utils, pdict ['release'])
    , utils.ExtProperty (utils, pdict ['number_effected'])
    , utils.ExtProperty (utils, pdict ['serial_number'])
    , utils.ExtProperty (utils, pdict ['analysis_result'])
    , utils.ExtProperty (utils, pdict ['return_type'])
    , utils.ExtProperty (utils, pdict ['business_unit'])
    , utils.ExtProperty (utils, pdict ['external_ref'])
    , utils.ExtProperty (utils, pdict ['customer'])
    , utils.ExtProperty 
        ( utils, pdict ['product']
        , help_props   = ['name', 'description']
        )
    , utils.ExtProperty
        ( utils, pdict ['prodcat']
        , multiselect = 1
        , filter      = dict (level = 3, valid = True)
        , searchable  = True
        , sortable    = True
        )
    , utils.ExtProperty (utils, pdict ['emails'])
    , utils.ExtProperty (utils, pdict ['cc_emails'])
    , utils.ExtProperty
        ( utils, pdict ['related_issues']
        , searchable   = True
        , sortable     = False
        , do_classhelp = False
        )
    , utils.ExtProperty
        ( utils, pdict ['related_issues']
        , searchname   = 'related_issues.id'
        )
    , utils.ExtProperty
        ( utils, pdict ['related_support']
        , searchable   = True
        , sortable     = False
        , do_classhelp = False
        )
    , utils.ExtProperty
        ( utils, pdict ['related_support']
        , searchname   = 'related_support.id'
        )
    , utils.ExtProperty (utils, pdict ['sap_ref'])
    , utils.ExtProperty (utils, pdict ['superseder'])
    , utils.ExtProperty
        ( utils, pdict ['nosy']
        , help_props   = ['firstname', 'lastname']
        , filter       = dict (status = utils.valid_user_stati (db))
        )
    , utils.ExtProperty
        ( utils, pdict ['creator']
        , help_props   = ['firstname', 'lastname']
        )
    , utils.ExtProperty (utils, pdict ['cc'])
    , utils.ExtProperty (utils, pdict ['bcc'])
    , utils.ExtProperty (utils, pdict ['lot'])
    , utils.ExtProperty (utils, pdict ['creation'])
    , utils.ExtProperty (utils, pdict ['activity'])
    , utils.ExtProperty (utils, pdict ['analysis_start'])
    , utils.ExtProperty (utils, pdict ['analysis_end'])
    , utils.ExtProperty (utils, pdict ['goods_received'])
    , utils.ExtProperty (utils, pdict ['goods_sent'])
    , utils.ExtProperty (utils, pdict ['first_reply'])
    , utils.ExtProperty (utils, pdict ['satisfied'])
    , utils.ExtProperty (utils, pdict ['closed'])
    , utils.ExtProperty (utils, pdict ['warranty'])
    );
   "
  tal:condition="context/is_view_ok">

  <tal:block metal:use-macro="templates/page/macros/search_results"/>
  <tal:block metal:use-macro="templates/page/macros/simple_search_form"/>
 </tal:block>
</tal:block>
</tal:block>
