<tal:block metal:use-macro="templates/page/macros/icing">
 <title metal:fill-slot="head_title">
  <tal:block tal:condition="context/id" i18n:translate="">
   <span tal:replace="string:${Classname}: ${context/id}"
    i18n:name="classname_id"/>
   created by
   <span tal:replace="context/creator" i18n:name="creator"/>
  </tal:block>
  <tal:block tal:condition="not:context/id" i18n:translate="">New
   <span tal:replace="Classname" i18n:name="Classname" />
  </tal:block>
 </title>
  <tal:block metal:fill-slot="create_or_query">
    <tal:block 
     metal:use-macro="templates/page/macros/create_or_query_new_tracker_item" />
  </tal:block> 

 <tal:block metal:fill-slot="content">
  <tal:block tal:define=
    " use_labelprop       python:0
    ; required_attributes string:user
    ">
   <tal:block metal:use-macro="templates/page/macros/formatted_class">
    <tal:block metal:fill-slot="formatted_class_content">
     <tr tal:condition="context/id">
      <td align="right" tal:define="prev python:utils.prev_user_dynamic (db, context)">
       <a tal:condition="prev"
          tal:attributes="href string:user_dynamic${prev/id}">
        &lt;&lt;&nbsp;
       </a>
      </td>
      <td align="left" tal:define="next python:utils.next_user_dynamic (db, context)">
       <a tal:condition="next"
          tal:attributes="href string:user_dynamic${next/id}">
        &gt;&gt;
       </a>
      </td>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'user')"/>
      <td tal:condition="not:context/id">
       <tal:block tal:define=
            "name      python:'user';
             form      string:itemSynopsis;
             dont_care string:- no selection -;
             selected  python:context.user and context.user.id or 0;
            ">
        <tal:block metal:use-macro="templates/userlist/macros/user"/>
       </tal:block>
      </td>
      <td tal:condition="context/id"
        tal:content="structure python:utils.ExtProperty
         ( utils, context.user.username
         , add_hidden = True
         , item       = context.user
         , searchname = 'user'
         ).formatlink ()"/>
      <th/>
      <td>
       <span nowrap tal:condition="python:context.id and not context.valid_to">
        <a i18n:translate="" tal:attributes="href python:
        'user_dynamic?:template=item&' + '&'.join
        (['%s=%s' % (i, utils.urlquote (str (context [i])))
         for i in utils.dynuser_copyfields
         ]
        )">
           new user_dynamic record
        </a>
       </span>
       <br tal:condition="python:
           (   context.id
           and not context.valid_to
           and utils.dynuser_half_frozen (db._db, context)
           )"/>
       <span nowrap tal:condition="python: context.id and
        utils.user_has_role (db._db, request.user.id, 'HR') and
        utils.dynuser_half_frozen (db._db, context)">
        <a i18n:translate="" tal:attributes="href python:
           'user_dynamic%s?:action=split_dynamic_user' % context.id">
           split user_dynamic record
        </a>
       </span>
      </td>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'valid_from')"/>
      <td>
       <span tal:content="structure python:context.valid_from.field ()"/>
      </td>
      <th tal:content="structure python:utils.fieldname
          (classname, 'valid_to')"/>
      <td>
       <span tal:replace="structure python:context.valid_to.field ()"/>
      </td>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'booking_allowed')"/>
      <td tal:content="structure python:context.booking_allowed.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'travel_full')"/>
      <td tal:content="structure python:context.travel_full.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'durations_allowed')"/>
      <td tal:content="structure python:context.durations_allowed.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'weekend_allowed')"/>
      <td tal:content="structure python:context.weekend_allowed.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'vacation_yearly')"/>
      <td tal:content="structure python:context.vacation_yearly.field ()"/>
      <th><a title="Help for vacation day / month"
             i18n:translate=""
             href="javascript:help_window
               ('user_dynamic?:template=property_help#vacation_day'
               , '500', '400'
               )"
             tabindex="-1">vacation_date</a></th>
      <td>
       <span tal:content="structure python:context.vacation_month.field (4)"/>
       -
       <span tal:content="structure python:context.vacation_day.field (4)"/>
       (month-day)
      </td>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname (classname, 'vcode')"/>
      <td tal:content="structure python:context.vcode.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'daily_worktime')"/>
      <td tal:content="structure python:context.daily_worktime.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'overtime_period')"/>
      <td tal:content="structure python:context.overtime_period.menu ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'all_in')"/>
      <td tal:content="structure python:context.all_in.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'supp_per_period')"/>
      <td tal:content="structure python:context.supp_per_period.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'weekly_hours')"/>
      <td tal:content="structure python:context.weekly_hours.field ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'supp_weekly_hours')"/>
      <td tal:content="structure python:context.supp_weekly_hours.field ()"/>
     </tr>
     <tr>
      <th/><td/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'additional_hours')"/>
      <td tal:content="structure python:context.additional_hours.field ()"/>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'daily_hours')"/>
      <td colspan=3>
       <span tal:repeat="i python:
              [ context.hours_mon
              , context.hours_tue
              , context.hours_wed
              , context.hours_thu
              , context.hours_fri
              , context.hours_sat
              , context.hours_sun
              ]"
        tal:content="structure python:utils.ExtProperty
         ( utils, i
         , item       = context
         , editable   = 1
         , fieldwidth = 3
         ).colonfield ()"/>
      </td>
     </tr>
     <tr>
      <th tal:content="structure python:utils.fieldname
          (classname, 'org_location')"/>
      <td tal:content="structure python:context.org_location.menu ()"/>
      <th tal:content="structure python:utils.fieldname
          (classname, 'department')"/>
      <td tal:content="structure python:context.department.menu ()"/>
     </tr>
    </tal:block>
   </tal:block>
  </tal:block>
 </tal:block>

</tal:block>
